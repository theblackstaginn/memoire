<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Memoire</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>

  <!-- AUTH BAR -->
  <header id="auth-bar">
    <div class="auth-inner">
      <span id="auth-status">Not signed in</span>
      <input id="auth-email" type="email" placeholder="Email" autocomplete="email" />
      <input id="auth-password" type="password" placeholder="Password" autocomplete="current-password" />
      <button id="auth-login" class="btn btn-primary btn-auth">Log in</button>
      <button id="auth-logout" class="btn btn-secondary btn-auth hidden">Log out</button>
    </div>
  </header>

  <!-- DESK SCENE -->
  <div id="scene">
    <img id="desk-bg" src="./memoire-assets/desk.png" alt="Desk background" />

    <!-- Book = READ (warning first) -->
    <button
      id="book-hitbox"
      class="hitbox"
      type="button"
      aria-label="Open memoirs"
    >
      <img src="./memoire-assets/book.png" alt="" />
    </button>

    <!-- Pen = EDIT (password gated) -->
    <button
      id="pen-hitbox"
      class="hitbox"
      type="button"
      aria-label="Edit memoirs"
    >
      <img src="./memoire-assets/pen.png" alt="" />
    </button>
  </div>

  <!-- GLOBAL MODAL OVERLAY -->
  <div id="modal-overlay" class="hidden">

    <!-- 1. WARNING MODAL -->
    <div id="warning-modal" class="modal card hidden">
      <h2>Private Memoirs</h2>
      <p>
        WARNING: This memoire contians explicit adult material. ðŸ˜˜
      </p>
      <div class="modal-actions">
        <button id="btn-warning-leave" type="button" class="btn btn-secondary">
          Leave
        </button>
        <button id="btn-warning-ok" type="button" class="btn btn-primary">
          OK
        </button>
      </div>
    </div>

    <!-- 2. PASSWORD MODAL -->
    <div id="password-modal" class="modal card hidden">
      <h2>Edit Memoirs</h2>
      <p>Enter the password to unlock edit mode.</p>
      <label class="field">
        <span>Password</span>
        <input id="password-input" type="password" autocomplete="off" />
      </label>
      <p id="password-error" class="error hidden">Incorrect password. Try again.</p>
      <div class="modal-actions">
        <button id="btn-password-cancel" type="button" class="btn btn-secondary">
          Cancel
        </button>
        <button id="btn-password-submit" type="button" class="btn btn-primary">
          Unlock
        </button>
      </div>
    </div>

    <!-- 3. READER MODAL -->
    <div id="reader-modal" class="modal sheet hidden">
      <div class="sheet-header">
        <button id="btn-reader-close" type="button" class="icon-btn">
          <img src="./memoire-assets/x-button.png" alt="Close" />
        </button>
        <h2>Memoirs â€“ Read</h2>
      </div>
      <div class="sheet-body reader-body">
        <img
          src="./memoire-assets/open-book.png"
          alt="Open memoir"
          class="open-book-img"
        />
      </div>
    </div>

    <!-- 4. EDITOR MODAL -->
    <div id="edit-modal" class="modal sheet hidden">
      <div class="sheet-header">
        <button id="btn-edit-close" type="button" class="icon-btn">
          <img src="./memoire-assets/x-button.png" alt="Close" />
        </button>
        <h2>Memoirs â€“ Edit</h2>
        <button id="btn-edit-save" type="button" class="btn btn-primary btn-save">
          Save
        </button>
      </div>
      <div class="sheet-body">
        <div class="edit-wrapper">
          <img src="./memoire-assets/parchment.png" alt="" class="edit-parchment" />
          <div id="edit-area" class="edit-area" contenteditable="true">
            Start writingâ€¦
          </div>
        </div>
      </div>
    </div>

  </div>

  <!-- Supabase from CDN (must be BEFORE app.js) -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <!-- Your app logic -->
  <script src="app.js"></script>
</body>
</html>